<?xml version="1.0" encoding="UTF-8"?>
<openerp>
<data>
    
    <!-- latinux tareas recursos -->

    <record model="ir.ui.view" id="latinuxtarea_recursos_wizard_form_view">
    	<field name="name">latinuxtarea.recursos.wizard.form.view</field>
		<field name="model">latinuxtarea.recurso</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="LT Resources Wizard">
   	 		  <field name="name" /> <!--on_change="onchange_name(name,task_id)"/>-->
			  <field name="quantity"/>
<!--			  <field name="task_id" />
			  <field name="name_r1"/>
			  <field name="quantity_r1"/>
			  <field name="name_r2"/>
			  <field name="quantity_r2"/>
			  <field name="name_r3"/>
			  <field name="quantity_r3"/>-->
			  <group colspan="2" col="4">
			  	<button type="action" special="cancel" icon="gtk-cancel" string="Cancelar" />
			  	<button type="object" name="accion" icon="gtk-ok" string="Aceptar" />
			  </group>
			</form>
		</field>
    </record>
    
    <record model="ir.ui.view" id="latinuxtarea_recursos_wizard_tree_view">
    	<field name="name">latinuxtarea.recursos.wizard.tree.view</field>
		<field name="model">latinuxtarea.recurso</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<form string="LT Resources tree">
   	 		  <field name="name" widget='selection' on_change="onchange_name(name)"/>
			  <field name="quantity"/>
	<!--		  <field name="task_id" invisible="1"/>
			  <field name="name_r1"/>
			  <field name="quantity_r1"/>
			  <field name="name_r2"/>
			  <field name="quantity_r2"/>
			  <field name="name_r3"/>
			  <field name="quantity_r3"/>-->
<!--			  <group colspan="2" col="4">
			  <button type="action" special="cancel" icon="gtk-cancel" string="Cancelar" />
			  <button type="object" name="accion" icon="gtk-ok" string="Aceptar" />
			  </group>-->
			</form>
		</field>
    </record>

    <record id="action_latinuxtarea_recursos_wizard_form" model="ir.actions.act_window" >
        <field name="name">LT Resources Wizard</field>
	<field name="type">ir.actions.act_window</field>
        <field name="res_model">latinuxtarea.recurso</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
	<field name="view_id" ref="latinuxtarea_recursos_wizard_form_view"/>
	<field name="target">new</field>	
    </record>
    
    <record model="ir.ui.view" id="latinuxtarea_tarea_tree_view">
		<field name="name">latinuxtarea.tarea.tree</field>
		<field name="model">latinuxtarea.tarea</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
		  <tree colors="grey:state in ('cancelled','done');blue:state == 'pending';red:date_deadline and (date_deadline&lt;current_date) and (state in ('draft','pending','open'))" string="LatinuxTarea Tasks">
		    	<field name="user_id"/>
                        <field name="name" select="1"/>	
			<field name="date_create"/>
			<field name="date_deadline" invisible="context.get('deadline_visible',True)"/>
			<field name="partner_id" string="Partner"/>
			<field name="description"/>
			<button name="next_type" invisible="context.get('set_visible',False)"
                        states="draft,open,pending"
                        string="Change Stage"
                        type="object"
                        icon="gtk-go-forward"
                        groups="base.group_extended"
                        help="Change Type"/>
			<field name="state"/>
			<button name="do_open" states="pending,draft,done,cancelled" string="Start Task" type="object" icon="gtk-media-play" help="For changing to open state" invisible="context.get('set_visible',False)"/>
		    </tree>
		</field>
    </record>    
    
    <record model="ir.ui.view" id="latinuxtarea_tarea_form_view">
    	<field name="name">latinuxtarea.tarea.form</field>
		<field name="model">latinuxtarea.tarea</field>
		<field name="priority">2</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
		<form string="LatinuxTarea Tarea">
			 <group>
			 <field name="user_id"/>
			 <field name="name" string="Task Summary"/>
			 <field name="date_create"/>
			 <field name="date_deadline" attrs="{'readonly':[('state','in',['done', 'cancelled'])]}"/>
			 <field colspan="4" name="partner_id" select="1" string="Customer"/>	
			 <field colspan="4" name="description" nolabel="1"  attrs="{'readonly':[('state','=','done')]}" widget="text_wiki"/>
			 <field name="target_id"/>
			 </group>
			 <notebook colspan="4">
	                        <page string="Recursos">
	                        <field name="resource_ids" nolabel="1" colspan="4">
	                        	<tree string="Resource lines" editable="bottom">
	                       			<field name="name"  on_change="onchange_name(name)"/>
	                       			<field name="quantity" />
	                       		</tree>
	                       	</field>
	                  	</page>
	                  </notebook>
			  <newline/>
			  <group col="11" colspan="4">
			    <field name="state" widget="statusbar" statusbar_visible="draft,open,done" statusbar_colors='{"pending":"blue"}' select="1"/>
			    <button name="do_cancel" states="draft,open,pending" string="Cancel" type="object" icon="gtk-cancel"/>
			    <button name="do_draft" states="open" string="Draft" type="object" icon="gtk-indent"/>
			    <button name="do_open" states="pending,draft" string="Start Task" type="object" icon="gtk-media-play"/>
			    <!--<button type='action' name='%(action_latinuxtarea_recursos_wizard_form)d' string='Add Resources' states="open" />-->
			  </group>
			</form>					
		</field>
    </record>

    <record model="ir.actions.act_window" id="action_latinuxtarea_tarea_tree">
        <field name="name">Latinux Tarea Tarea</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">latinuxtarea.tarea</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>        
    </record>
       
    <!-- latinux tareas objetivos -->
    
    <record model="ir.ui.view" id="latinuxtarea_target_tree_view">
		<field name="name">latinuxtarea.target.tree</field>
		<field name="model">latinuxtarea.target</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
		  <tree string="LatinuxTarea target">
		        <field name="name" select="1"/>			
			<field name="task_ids" invisible="1"/>
			<field name="description"/>
			<field name="progress" />
		    </tree>
		</field>
    </record>    
    
    <record model="ir.ui.view" id="latinuxtarea_target_form_view">
		<field name="name">latinuxtarea.target.form</field>
		<field name="model">latinuxtarea.target</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
	       	    <form string="LatinuxTarea target" >
	       	    	<group colspan="8" rowspan="3">
		        <field name="name" select="1" colspan="3"/>			
			<field name="description" />		
			</group>
			<group colspan="4">
			<field name="task_ids" invisible="0" readonly="1" nolabel="1" >
				<tree colors="grey:state in ('cancelled');blue:state =='done';red:state in ('draft','pending','open')" string="Associated Tasks">
                       			<field name="date_create"/>
                       			<field name="name" />	                       			
                       			<field name="date_deadline"/>
                       			<field name="state"/>
                       		</tree>
	                </field>
	                </group>		        
		        <group colspan="4">
                       	<field name="progress" widget="progressbar" colspan="2"/>
                       	</group>
		    </form>
		</field>
    </record>
    
    <record model='ir.actions.act_window' id='action_latinuxtarea_target_tree'>
        <field name='name'>LatinuxTarea Objetivos</field>
        <field name='type'>ir.actions.act_window</field>
        <field name='res_model'>latinuxtarea.target</field>
        <field name='view_type'>form</field>
        <field name='view_mode'>tree,form</field>
    </record>
    
    <!-- MENU -->
    
    <menuitem id="latinuxtarea_tarea_menu" sequence="10" name="LatinuxTareas"/>
    <menuitem id="latinuxtarea_tarea_menu_1" parent="latinuxtarea_tarea_menu" sequence="10" name="LatinuxTarea Tarea"/>
    <menuitem id="latinuxtarea_tarea_menu_4" parent="latinuxtarea_tarea_menu" sequence="9" name="LatinuxTarea Obj"/>
    <menuitem id='latinuxtarea_tarea_menu_3' sequence='1' name='Latinux Objetivos' parent='latinuxtarea_tarea_menu_4' action='action_latinuxtarea_target_tree'/>
    <menuitem id="latinuxtarea_tarea_menu_2" action="action_latinuxtarea_tarea_tree" parent="latinuxtarea_tarea_menu_1" sequence="2" name="LatinuxTarea Tarea"/>

</data>
</openerp>
